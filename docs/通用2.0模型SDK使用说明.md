# 火山引擎智能绘图-通用2.0L-文生图SDK使用说明（AI可读格式）
## 1. 前置说明
### 1.1 接口类型分类
- 同步接口：直接返回结果
- 异步接口：分“提交任务（返回taskId）”和“查询任务（返回结果）”两步
- 同步转异步接口：分“提交任务（返回taskId）”和“查询任务（返回结果）”两步

### 1.2 通用调用前提
- Content-Type固定为`application/json`
- 需获取接口文档中`请求参数-Query参数`的`Action`（固定值：CVProcess）和`Version`（固定值：2022-08-31），用于匹配SDK对应示例

## 2. 核心调用步骤（四步流程）
| 步骤 | 操作内容 | 关键说明 |
| ---- | ---- | ---- |
| Step1 | 匹配SDK示例 | 根据接口文档的`Action`全局检索SDK，找到对应示例（如同步接口对应Action=CVProcess的示例） |
| Step2 | 填充请求Body | 复制接口文档中`请求参数-Body参数`的`请求示例`内容，粘贴到SDK调用示例的`body入参部分` |
| Step3 | 配置关键信息 | 替换示例中的`AK/SK`（访问密钥），运行程序调试 |
| Step4 | 正式工程集成 | 调试通过后，将SDK示例代码集成到实际工程中 |

### 2.1 参考Body请求示例（JSON格式）
```json
{
    "req_key":"high_aes_general_v20_L",
    "width":512,
    "height":512,
    "seed":-1,
    "prompt":"千军万马",
    "model_version":"general_v2.0_L",
    "req_schedule_conf":"general_v20_9B_rephraser",
    "negative_prompt":"nsfw, nude, smooth skin, unblemished skin, mole, low resolution, blurry, worst quality, mutated hands",
    "scale":3.5,
    "ddim_steps":16,
    "use_pre_llm":true,
    "use_sr":true,
    "sr_seed":-1,
    "is_only_sr":false,
    "sr_scale":3.5,
    "sr_steps":10,
    "sr_strength":0.4,
    "return_url":true,
    "logo_info":{
        "add_logo":false,
        "position":0,
        "language":0,
        "opacity":0.3
    }
}
```

## 3. 多语言SDK调用示例（按语言分类）
### 3.1 Java
#### 3.1.1 SDK基础信息
- SDK地址：https://github.com/volcengine/volc-sdk-java
- 所有示例路径前缀：`https://github.com/volcengine/volc-sdk-java/blob/main/example/src/main/java/com/volcengine/example/visual/`

#### 3.1.2 接口调用示例
| 接口类型 | Action | 示例文件名 | 核心代码片段 |
| ---- | ---- | ---- | ---- |
| 同步接口 | CVProcess | CVProcessDemo.java | ```java
package com.volcengine.example.visual;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.volcengine.service.visual.IVisualService;
import com.volcengine.service.visual.impl.VisualServiceImpl;

public class CVProcessDemo {
    public static void main(String[] args) {
        IVisualService visualService = VisualServiceImpl.getInstance();
        // 配置AK/SK（未在~/.vcloud/config设置时需调用）
        visualService.setAccessKey("your ak");
        visualService.setSecretKey("your sk");

        JSONObject req = new JSONObject();
        // 填充Body参数（参考2.1的请求示例）
        req.put("req_key", "high_aes_general_v20_L");
        req.put("width", 512);
        // ...其他Body参数

        try {
            Object response = visualService.cvProcess(req);
            System.out.println(JSON.toJSONString(response));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
``` |
| 异步提交任务 | CVSubmitTask | CVSubmitTaskDemo.java | ```java
package com.volcengine.example.visual;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.volcengine.service.visual.IVisualService;
import com.volcengine.service.visual.impl.VisualServiceImpl;

public class CVSubmitTaskDemo {
    public static void main(String[] args) {
        IVisualService visualService = VisualServiceImpl.getInstance();
        visualService.setAccessKey("your ak");
        visualService.setSecretKey("your sk");

        JSONObject req = new JSONObject();
        req.put("req_key", "high_aes_general_v20_L");
        // ...其他Body参数

        try {
            Object response = visualService.cvSubmitTask(req);
            System.out.println(JSON.toJSONString(response));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
``` |
| 异步查询任务 | CVGetResult | CVGetResultDemo.java | ```java
package com.volcengine.example.visual;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.volcengine.service.visual.IVisualService;
import com.volcengine.service.visual.impl.VisualServiceImpl;

public class CVGetResultDemo {
    public static void main(String[] args) {
        IVisualService visualService = VisualServiceImpl.getInstance();
        visualService.setAccessKey("your ak");
        visualService.setSecretKey("your sk");

        JSONObject req = new JSONObject();
        req.put("req_key", "high_aes_general_v20_L");
        req.put("task_id", "xxx"); // 异步提交任务返回的taskId
        // ...其他Body参数

        try {
            Object response = visualService.cvGetResult(req);
            System.out.println(JSON.toJSONString(response));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
``` |
| 同步转异步提交任务 | CVSync2AsyncSubmitTask | CVSync2AsyncSubmitTaskDemo.java | ```java
package com.volcengine.example.visual;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.volcengine.service.visual.IVisualService;
import com.volcengine.service.visual.impl.VisualServiceImpl;

public class CVSync2AsyncSubmitTaskDemo {
    public static void main(String[] args) {
        IVisualService visualService = VisualServiceImpl.getInstance();
        visualService.setAccessKey("your ak");
        visualService.setSecretKey("your sk");

        JSONObject req = new JSONObject();
        req.put("req_key", "high_aes_general_v20_L");
        // ...其他Body参数

        try {
            Object response = visualService.cvSync2AsyncSubmitTask(req);
            System.out.println(JSON.toJSONString(response));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
``` |
| 同步转异步查询任务 | CVSync2AsyncGetResult | CVSync2AsyncGetResultDemo.java | ```java
package com.volcengine.example.visual;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.volcengine.service.visual.IVisualService;
import com.volcengine.service.visual.impl.VisualServiceImpl;

public class CVSync2AsyncGetResultDemo {
    public static void main(String[] args) {
        IVisualService visualService = VisualServiceImpl.getInstance();
        visualService.setAccessKey("your ak");
        visualService.setSecretKey("your sk");

        JSONObject req = new JSONObject();
        req.put("req_key", "high_aes_general_v20_L");
        req.put("task_id", "xxx"); // 同步转异步提交任务返回的taskId
        // ...其他Body参数

        try {
            Object response = visualService.cvSync2AsyncGetResult(req);
            System.out.println(JSON.toJSONString(response));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
``` |


### 3.2 Golang
#### 3.2.1 SDK基础信息
- SDK地址：https://github.com/volcengine/volc-sdk-golang
- 所有示例路径前缀：`https://github.com/volcengine/volc-sdk-golang/blob/main/example/visual/`

#### 3.2.2 接口调用示例
| 接口类型 | Action | 示例文件名 | 核心代码片段 |
| ---- | ---- | ---- | ---- |
| 同步接口 | CVProcess | CVProcess.go | ```go
package main
import (
    "encoding/json"
    "fmt"
    "github.com/volcengine/volc-sdk-golang/service/visual"
)

func main() {
    testAk := "your ak"
    testSk := "your sk"

    // 配置AK/SK
    visual.DefaultInstance.Client.SetAccessKey(testAk)
    visual.DefaultInstance.Client.SetSecretKey(testSk)
    // 可选：设置Region和Host（默认无需配置）
    // visual.DefaultInstance.SetRegion("region")
    // visual.DefaultInstance.SetHost("host")

    // 填充Body参数
    reqBody := map[string]interface{}{
        "req_key": "high_aes_general_v20_L",
        "width": 512,
        // ...其他Body参数
    }

    // 调用接口并打印结果
    resp, status, err := visual.DefaultInstance.CVProcess(reqBody)
    fmt.Println(status, err)
    b, _ := json.Marshal(resp)
    fmt.Println(string(b))
}
``` |
| 异步提交任务 | CVSubmitTask | CVSubmitTask.go | ```go
package main
import (
    "encoding/json"
    "fmt"
    "github.com/volcengine/volc-sdk-golang/service/visual"
)

func main() {
    testAk := "your ak"
    testSk := "your sk"

    visual.DefaultInstance.Client.SetAccessKey(testAk)
    visual.DefaultInstance.Client.SetSecretKey(testSk)

    reqBody := map[string]interface{}{
        "req_key": "high_aes_general_v20_L",
        // ...其他Body参数
    }

    resp, status, err := visual.DefaultInstance.CVSubmitTask(reqBody)
    fmt.Println(status, err)
    b, _ := json.Marshal(resp)
    fmt.Println(string(b))
}
``` |
| 异步查询任务 | CVGetResult | CVGetResult.go | ```go
package main
import (
    "encoding/json"
    "fmt"
    "github.com/volcengine/volc-sdk-golang/service/visual"
)

func main() {
    testAk := "your ak"
    testSk := "your sk"

    visual.DefaultInstance.Client.SetAccessKey(testAk)
    visual.DefaultInstance.Client.SetSecretKey(testSk)

    reqBody := map[string]interface{}{
        "req_key": "high_aes_general_v20_L",
        "task_id": "xxx", // 异步提交任务返回的taskId
        // ...其他Body参数
    }

    resp, status, err := visual.DefaultInstance.CVGetResult(reqBody)
    fmt.Println(status, err)
    b, _ := json.Marshal(resp)
    fmt.Println(string(b))
}
``` |
| 同步转异步提交任务 | CVSync2AsyncSubmitTask | CVSync2AsyncSubmitTask.go | ```go
package main
import (
    "encoding/json"
    "fmt"
    "github.com/volcengine/volc-sdk-golang/service/visual"
)

func main() {
    testAk := "your ak"
    testSk := "your sk"

    visual.DefaultInstance.Client.SetAccessKey(testAk)
    visual.DefaultInstance.Client.SetSecretKey(testSk)

    reqBody := map[string]interface{}{
        "req_key": "high_aes_general_v20_L",
        // ...其他Body参数
    }

    resp, status, err := visual.DefaultInstance.CVSync2AsyncSubmitTask(reqBody)
    fmt.Println(status, err)
    b, _ := json.Marshal(resp)
    fmt.Println(string(b))
}
``` |
| 同步转异步查询任务 | CVSync2AsyncGetResult | CVSync2AsyncGetResult.go | ```go
package main
import (
    "encoding/json"
    "fmt"
    "github.com/volcengine/volc-sdk-golang/service/visual"
)

func main() {
    testAk := "your ak"
    testSk := "your sk"

    visual.DefaultInstance.Client.SetAccessKey(testAk)
    visual.DefaultInstance.Client.SetSecretKey(testSk)

    reqBody := map[string]interface{}{
        "req_key": "high_aes_general_v20_L",
        "task_id": "xxx", // 同步转异步提交任务返回的taskId
        // ...其他Body参数
    }

    resp, status, err := visual.DefaultInstance.CVSync2AsyncGetResult(reqBody)
    fmt.Println(status, err)
    b, _ := json.Marshal(resp)
    fmt.Println(string(b))
}
``` |


### 3.3 Python
#### 3.3.1 SDK基础信息
- SDK地址：https://github.com/volcengine/volc-sdk-python
- 所有示例路径前缀：`https://github.com/volcengine/volc-sdk-python/blob/main/volcengine/example/visual/`

#### 3.3.2 接口调用示例
| 接口类型 | Action | 示例文件名 | 核心代码片段 |
| ---- | ---- | ---- | ---- |
| 同步接口 | CVProcess | cv_process.py | ```python
# coding:utf-8
from __future__ import print_function
from volcengine.visual.VisualService import VisualService

if __name__ == '__main__':
    visual_service = VisualService()
    # 配置AK/SK（未在$HOME/.volc/config设置时需调用）
    visual_service.set_ak('your ak')
    visual_service.set_sk('your sk')
    
    # 填充Body参数
    form = {
        "req_key": "high_aes_general_v20_L",
        "width": 512,
        # ...其他Body参数
    }

    # 调用接口并打印结果
    resp = visual_service.cv_process(form)
    print(resp)
``` |
| 异步提交任务 | CVSubmitTask | cv_submit_task.py | ```python
# coding:utf-8
from __future__ import print_function
from volcengine.visual.VisualService import VisualService

if __name__ == '__main__':
    visual_service = VisualService()
    visual_service.set_ak('your ak')
    visual_service.set_sk('your sk')
    
    form = {
        "req_key": "high_aes_general_v20_L",
        # ...其他Body参数
    }

    resp = visual_service.cv_submit_task(form)
    print(resp)
``` |
| 异步查询任务 | CVGetResult | cv_get_result.py | ```python
# coding:utf-8
from __future__ import print_function
from volcengine.visual.VisualService import VisualService

if __name__ == '__main__':
    visual_service = VisualService()
    visual_service.set_ak('your ak')
    visual_service.set_sk('your sk')
    
    form = {
        "req_key": "high_aes_general_v20_L",
        "task_id": "xxx", # 异步提交任务返回的taskId
        # ...其他Body参数
    }

    resp = visual_service.cv_get_result(form)
    print(resp)
``` |
| 同步转异步提交任务 | CVSync2AsyncSubmitTask | cv_sync2async_submit_task.py | ```python
# coding:utf-8
from __future__ import print_function
from volcengine.visual.VisualService import VisualService

if __name__ == '__main__':
    visual_service = VisualService()
    visual_service.set_ak('your ak')
    visual_service.set_sk('your sk') # 原文档中此处误写为'your ak'，实际需填SK
    
    form = {
        "req_key": "high_aes_general_v20_L",
        # ...其他Body参数
    }

    resp = visual_service.cv_sync2async_submit_task(form)
    print(resp)
``` |
| 同步转异步查询任务 | CVSync2AsyncGetResult | cv_sync2async_get_result.py | ```python
# coding:utf-8
from __future__ import print_function
from volcengine.visual.VisualService import VisualService

if __name__ == '__main__':
    visual_service = VisualService()
    visual_service.set_ak('your ak')
    visual_service.set_sk('your sk') # 原文档中此处误写为'your ak'，实际需填SK
    
    form = {
        "req_key": "high_aes_general_v20_L",
        "task_id": "xxx", # 同步转异步提交任务返回的taskId
        "req_json": "{\"logo_info\":{\"add_logo\":true,\"position\":1,\"language\":1,\"opacity\":0.5}}"
        # ...其他Body参数
    }

    resp = visual_service.cv_sync2async_get_result(form)
    print(resp)
``` |


### 3.4 PHP
#### 3.4.1 SDK基础信息
- SDK地址：https://github.com/volcengine/volc-sdk-php
- 所有示例路径前缀：`https://github.com/volcengine/volc-sdk-php/blob/main/examples/Visual/`

#### 3.4.2 接口调用示例
| 接口类型 | Action | 示例文件名 | 核心代码片段 |
| ---- | ---- | ---- | ---- |
| 同步接口 | CVProcess | DemoCVProcess.php | ```php
<?php
require('../../../vendor/autoload.php');
use Volc\Service\Visual;

// 初始化客户端
$client = Visual::getInstance();
// 配置AK/SK（未在～/.volc/config设置时需调用）
$client->setAccessKey('your ak');
$client->setSecretKey('your sk');

echo "\nDemo CVProcess\n";

// 填充Body参数
$body = [
    "req_key" => "high_aes_general_v20_L",
    "width" => 512,
    // ...其他Body参数
];

// 调用接口并处理结果（替换特殊字符）
$response = $client->CVProcess(['json' => $body]);
$response = str_replace('\u0026', '&', $response);
echo $response;
``` |
| 异步提交任务 | CVSubmitTask | DemoCVSubmitTask.php | ```php
<?php
require('../../../vendor/autoload.php');
use Volc\Service\Visual;

$client = Visual::getInstance();
$client->setAccessKey('your ak');
$client->setSecretKey('your sk');

echo "\nDemo CVSubmitTask\n";

$body = [
    "req_key" => "high_aes_general_v20_L",
    // ...其他Body参数
];

$response = $client->CVSubmitTask(['json' => $body]);
$response = str_replace('\u0026', '&', $response);
echo $response;
``` |
| 异步查询任务 | CVGetResult | DemoCVGetResult.php | ```php
<?php
require('../../../vendor/autoload.php');
use Volc\Service\Visual;

$client = Visual::getInstance();
$client->setAccessKey('your ak');
$client->setSecretKey('your sk');

echo "\nDemo CVGetResult\n";

$body = [
    "req_key" => "high_aes_general_v20_L",
    "task_id" => "xxx", // 异步提交任务返回的taskId
    // ...其他Body参数
];

$response = $client->CVGetResult(['json' => $body]);
$response = str_replace('\u0026', '&', $response);
echo $response;
``` |
| 同步转异步提交任务 | CVSync2AsyncSubmitTask | DemoCVSync2AsyncSubmitTask.php | ```php
<?php
require('../../../vendor/autoload.php');
use Volc\Service\Visual;

$client = Visual::getInstance();
$client->setAccessKey('your ak');
$client->setSecretKey('your sk');

echo "\nDemo CVSync2AsyncSubmitTask\n";

$body = [
    "req_key" => "high_aes_general_v20_L",
    // ...其他Body参数
];

$response = $client->CVSync2AsyncSubmitTask(['json' => $body]);
$response = str_replace('\u0026', '&', $response);
echo $response;
``` |
| 同步转异步查询任务 | CVSync2AsyncGetResult | DemoCVSync2AsyncGetResult.php | ```php
<?php
require('../../../vendor/autoload.php');
use Volc\Service\Visual;

$client = Visual::getInstance();
$client->setAccessKey('your ak');
$client->setSecretKey('your sk');

echo "\nDemo CVSync2AsyncGetResult\n";

$body = [
    "req_key" => "high_aes_general_v20_L",
    "task_id" => "xxx", // 同步转异步提交任务返回的taskId
    "req_json" => "{\"logo_info\":{\"add_logo\":true,\"position\":2,\"language\":0,\"opacity\":1}}"
    // ...其他Body参数
];

$response = $client->CVSync2AsyncGetResult(['json' => $body]);
$response = str_replace('\u0026', '&', $response);
echo $response;
``` |


## 4. 关键注意事项
1. AK/SK配置：若未在系统默认路径（如Java的`~/.vcloud/config`、Python的`$HOME/.volc/config`）配置，必须在代码中显式调用`setAccessKey`和`setSecretKey`赋值，否则会权限错误。
2. Body参数完整性：需严格按照接口文档的`请求示例`填充所有必填参数（如`req_key`固定为`high_aes_general_v20_L`），避免参数缺失导致调用失败。
3. 特殊字符处理：PHP示例中需通过`str_replace('\u0026', '&', $response)`处理返回结果中的特殊字符，确保结果可读性。
4. 文档纠错：Python的同步转异步相关示例中，原文档将`set_sk`误写为`set_ak`，实际使用时需修正为`visual_service.set_sk('your sk')`。