# 火山引擎通用2.0文生图接口文档（AI可读格式）
## 1. 接口基础信息
| 字段 | 内容 |
| ---- | ---- |
| 模型名称 | 通用2.0模型（历史名称：通用2.0S模型） |
| 模型特性 | 原生中英文双语模型，在图文匹配度、美感上均有大幅提升 |
| 推荐使用场景 | 通用类别（不局限于人像人体）、效果要求极高、延迟要求较高的场景 |
| 关键建议 | 强烈建议开启超分参数，开启后原输出宽高均会×2 |


## 2. 请求说明
### 2.1 基础请求参数
| 类别 | 字段 | 内容 |
| ---- | ---- | ---- |
| 接口地址 | - | https://visual.volcengineapi.com |
| 请求方式 | - | POST |
| Content-Type | - | application/json |
| Header参数 | 公共参数 | 参考“公共参数”文档；服务Region为cn-north-1，Service为cv |
| Query参数 | Action | 必选，String类型，取值：CVProcess |
| Query参数 | Version | 必选，String类型，取值：2022-08-31 |

### 2.2 Body参数（业务请求参数）
| 字段 | 可选/必选 | 类型 | 说明 | 备注 |
| ---- | ---- | ---- | ---- | ---- |
| req_key | 必选 | String | 算法名称 | 取固定值为high_aes_general_v20 |
| prompt | 必选 | String | 用于生成图像的提示词 | 中英文均可输入 |
| seed | 可选 | int | 随机种子 | 默认值：-1（-1为不随机种子；其他为指定随机种子） |
| scale | 可选 | float | 影响文本描述的程度 | 默认值：3.5；取值范围[1, 30] |
| ddim_steps | 可选 | int | 生成图像的步数 | 默认值：16；取值范围[1-50] |
| use_rephraser | 可选 | bool | 开启prompt扩写 | 默认值：True；<br>输入prompt简短简单（辅助生成图片场景）传True；<br>输入prompt冗长复杂（设计工具场景）传False |
| width | 可选 | int | 生成图像的宽 | 默认值：512；取值范围[256-680]；<br>宽、高与512差距过大，出图效果不佳、延迟过长概率显著增加；<br>超分前建议比例及对应宽高：1:1（512×512）、4:3（512×384）、3:4（384×512）、3:2（512×341）、2:3（341×512）、16:9（512×288）、9:16（288×512） |
| height | 可选 | int | 生成图像的高 | 默认值：512；取值范围[256-680] |
| use_sr | 可选 | Bool | 超分功能开关 | 默认值：True；<br>True：文生图+AIGC超分；False：仅文生图；<br>开启后宽高均乘以2返回，延迟会增加；<br>示例：宽高512×512时，关闭出图512×512，开启出图1024×1024 |
| return_url | 可选 | bool | 输出是否返回图片链接 | 链接有效期为24小时 |
| logo_info | 可选 | LogoInfo | 水印信息 | 详见“2.3 LogoInfo参数” |

### 2.3 LogoInfo参数（水印相关）
| 字段 | 类型 | 必选 | 描述 | 备注 |
| ---- | ---- | ---- | ---- | ---- |
| add_logo | Boolean | 否 | 是否添加水印 | True为添加，False不添加；默认不添加 |
| position | Int | 否 | 水印的位置 | 取值：0（右下角）、1（左下角）、2（左上角）、3（右上角）；默认0 |
| language | Int | 否 | 水印的语言 | 取值：0（中文“AI生成”）、1（英文“Generated by AI”）；默认0 |
| opacity | Float | 否 | 水印的不透明度 | 取值范围0-1，1表示完全不透明；默认0.3 |
| logo_text_content | String | 否 | 明水印自定义内容 | - |


## 3. 输出说明
### 3.1 通用输出参数
参考“通用返回字段及错误码”文档

### 3.2 业务输出参数（重点关注data字段）
| 字段 | 类型 | 说明 |
| ---- | ---- | ---- |
| binary_data_base64 | array of string | 返回图片的base64数组 |
| image_urls | array of string | 输出处理过的图片url | 数组（单张图），输出图片格式为jpeg格式 |
| algorithm_base_resp | Object | 算法基础响应 | 包含status_code（状态码）、status_message（状态信息） |
| predict_tags_result | String | 预测标签结果 | - |
| rephraser_result | String | prompt扩写结果 | - |
| request_id | String | 请求ID | - |


## 4. 请求&返回完整示例
### 4.1 请求示例（JSON格式）
```json
{
    "req_key": "high_aes_general_v20",
    "prompt": "千军万马",
    "seed": -1,
    "scale": 3.5,
    "ddim_steps": 16,
    "width": 512,
    "height": 512,
    "use_sr": true,
    "return_url": true,
    "logo_info": {
        "add_logo": false,
        "position": 0,
        "language": 0,
        "opacity": 0.3,
        "logo_text_content": "这里是明水印内容"
    }
}
```

### 4.2 返回示例（JSON格式）
```json
{
    "code": 10000,
    "data": {
        "algorithm_base_resp": {
            "status_code": 0,
            "status_message": "Success"
        },
        "binary_data_base64": [],
        "image_urls": [
            "https://xxx"
        ],
        "predict_tags_result": "",
        "rephraser_result": "壮观的场景，展现了千军万马。画面中，穿着衣服的士兵们身着铠甲，手持长矛，整齐划一地行进在大地上。他们的身后是蓝天白云，而前方则是无尽的草原。",
        "request_id": "0567fc0c9455fa1698df7c48687cb0cc45f7b73a9d87a3f2ae16d06212183aa5"
    },
    "message": "Success",
    "request_id": "2024081617272268D32DE194F8F79A9B58",
    "status": 10000,
    "time_elapsed": "9.7982114s"
}
```


## 5. 错误码
### 5.1 通用错误码
参考“通用返回字段及错误码”文档

### 5.2 业务错误码
| HttpCode | 错误码 | 错误消息 | 描述 |
| ---- | ---- | ---- | ---- |
| 200 | 10000 | 无 | 请求成功 |
| 400 | 50411 | Pre Img Risk Not Pass | 输入图片前审核未通过 |
| 400 | 50511 | Post Img Risk Not Pass | 输出图片后审核未通过 |
| 400 | 50412 | Text Risk Not Pass | 输入文本前审核未通过 |
| 400 | 50512 | Post Text Risk Not Pass | 输出文本后审核未通过 |
| 400 | 50413 | Post Text Risk Not Pass | 输入文本NER、IP、Blocklist等拦截 |


## 6. 其他说明
- SDK使用说明：参考“SDK使用说明”文档